<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
	
<mapper namespace="com.sweetk.kcti.survey.mapper.SurveyMapper">

	<insert id="survey_save" parameterType="SurveyVo">
		INSERT INTO survey (survey_target, survey_title, temp_yn, reg_dt, reg_id ,start_dt,end_dt)
		VALUES (#{survey_target}, #{survey_title}, #{temp_yn}, now(), #{reg_id} , #{start_dt}, #{end_dt})
		<selectKey resultType="int" keyProperty="survey_key" order="AFTER">
			select max(survey_key) FROM survey
		</selectKey>
	</insert>

	<insert id="survey_q_save" parameterType="SurveyVo">
		INSERT INTO survey_question (`survey_key`, `question_seq`, `multi_yn`, `question`)
		VALUES (#{survey_key}, #{question_seq} , #{multi_yn} , #{question});
	</insert>

	<insert id="survey_mq_save" parameterType="SurveyVo">
		INSERT INTO multi_question (`survey_key`, `question_seq`, `multi_seq`, `multi_question`)
		VALUES (#{survey_key}, #{question_seq}, #{multi_seq}, #{multi_question});
	</insert>
	
	
</mapper>